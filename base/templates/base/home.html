{% extends 'main.html' %}
{% load static %}

{% block content %}

<div class="div-main">
  <div class="div-main-categories">
    <div>
      <header>
        Categories
      </header>
      <hr>
      <br>
      <div class="categories-list">
        {% include 'base/categories.html' %}
      </div>
    </div>
  </div>

  <div>
    {% if request.user.is_authenticated %}
      <div>
        <span class="main-button" style="display: inline-block; height: 25px">Hi {{ user.get_username }} ðŸ‘‹</span>
        <span><a class="main-button" href="{% url 'add-offer' %}" style="display: inline-block; height: 25px">Add new offer</a></span>
      </div>
    {% endif %}

    <div id="offers-list">
      {% include 'base/offers.html' %}

      <!-- <script>
    let offers_list = document.querySelectorAll('.offer-list');

    for(let i = 0; i < offers_list.length; i++) {
      offers_list[i].addEventListener('click', () => {
        let id_offer = offers_list[i].getAttribute('value');

        axios({
          method: 'GET',
          url: `${window.location.origin}/offer/${id_offer}`
        })
          .then(response => {
            document.getElementsByClassName('div-main')[0].innerHTML = `${response.data}`;
          })
      });
    }
  </script> -->
    </div>
  </div>

  <div class="div-main-last">
    <header>Last activity</header>

    <div>
      {% include 'base/most-popular.html' %}
    </div>

  </div>
</div>

{% endblock content %}